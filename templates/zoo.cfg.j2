tickTime={{ tick_time }}
maxSessionTimeout={{  max_session_timeout }}
dataDir={{ zookeeper_data_dir }}
dataLogDir={{ zookeeper_log_dir }}
clientPort={{ client_port }}
initLimit={{ init_limit }}
syncLimit={{ sync_limit }}
maxClientCnxns={{ zookeeper_max_client_connections }}
{% if zookeeper_autopurge_purgeInterval > 0 %}
autopurge.purgeInterval={{ zookeeper_autopurge_purgeInterval }}
autopurge.snapRetainCount={{ zookeeper_autopurge_snapRetainCount }}
{% endif %}

{% for server in zookeeper_hosts %}
{% if server.host is defined %}
{% if server.ip is defined %}
server.{{server.id}}={{server.ip}}:{{zookeeper_cluster_ports}}
{% else %}
server.{{server.id}}={{server.host}}:{{zookeeper_cluster_ports}}
{% endif %}
{% else %}
server.{{loop.index}}={{server}}:{{zookeeper_cluster_ports}}
{% endif %}
{% endfor %}

# some stuff to try:
#{% for url in zookeeper_hosts %}
#  {%- set url_host = url.split(':')[0] -%}
#  {%- if url_host == inventory_hostname or url_host in ansible_all_ipv4_addresses -%}
#server.{{loop.index0}}=0.0.0.0:2888:3888
#{% else %}
#server.{{loop.index0}}={{url_host}}:2888:3888
#{% endif %}
#{% endfor %}